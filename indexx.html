<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema SENAI - Calendário Acadêmico</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- FullCalendar -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/main.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    #calendar {
      min-height: 600px;
    }
  </style>
</head>

<body class="bg-white min-h-screen font-sans">

  <!-- Página de Cadastro -->
  <div id="cadastroPage" class="flex items-center justify-center h-screen fade-in">
    <div class="bg-white p-10 rounded-xl shadow-lg w-full max-w-md text-center border-2 border-gray-200">
      
      <div class="mb-6 flex justify-center">
        <div class="w-32 h-32 bg-[#001f4d] rounded-full flex items-center justify-center">
          <img src="imagemsenai.png" alt="">
        </div>
      </div>

      <h1 class="text-2xl font-bold text-[#001f4d] mb-6">Cadastro de Professor</h1>

      <form id="cadastroForm" class="space-y-4 text-left">
        <div>
          <label class="block text-gray-700 mb-1 font-semibold">Nome Completo</label>
          <input type="text" id="profName"
            class="w-full border-2 border-gray-300 rounded-lg px-3 py-2"
            placeholder="Digite o nome completo" required>
        </div>

        <div>
          <label class="block text-gray-700 mb-1 font-semibold">E-mail</label>
          <input type="email" id="profEmail"
            class="w-full border-2 border-gray-300 rounded-lg px-3 py-2"
            placeholder="Digite o e-mail" required>
        </div>

        <div>
          <label class="block text-gray-700 mb-1 font-semibold">Senha</label>
          <div class="relative">
            <input type="password" id="profSenha"
              class="w-full border-2 border-gray-300 rounded-lg px-3 py-2 pr-10"
              placeholder="Crie uma senha" required>

            <button type="button" id="toggleSenha"
              class="absolute inset-y-0 right-3 flex items-center text-gray-500">
              <i class="fa-solid fa-eye" id="eyeIcon"></i>
            </button>
          </div>
        </div>

        <button type="submit"
          class="w-full bg-[#001f4d] text-white py-3 rounded-lg font-semibold hover:bg-[#003080]">
          Cadastrar e Entrar
        </button>
      </form>
    </div>
  </div>

  <!-- Área do Professor -->
  <div id="professorArea" class="hidden fade-in min-h-screen flex flex-col">

    <header class="bg-[#001f4d] text-white p-4 shadow-lg">
      <div class="flex justify-between items-center max-w-7xl mx-auto">

        <div class="flex items-center space-x-4">
          <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center">
            <span class="text-[#001f4d] text-xl font-bold">S</span>
          </div>

          <div>
            <h1 class="text-2xl font-bold">Sistema Acadêmico SENAI</h1>
            <p id="welcomeText" class="text-sm opacity-90"></p>
          </div>
        </div>

        <div class="flex gap-2">
          <button id="calendarBtn" class="px-4 py-2 bg-white text-[#001f4d] rounded-lg font-semibold">
            <i class="fa-solid fa-calendar mr-2"></i> Calendário
          </button>

          <button id="disciplinasBtn" class="px-4 py-2 bg-[#003080] text-white rounded-lg font-semibold">
            <i class="fa-solid fa-book mr-2"></i> Disciplinas
          </button>

          <button id="professoresBtn" class="px-4 py-2 bg-[#003080] text-white rounded-lg font-semibold">
            <i class="fa-solid fa-user mr-2"></i> Professores
          </button>

          <button id="horariosBtn" class="px-4 py-2 bg-[#003080] text-white rounded-lg font-semibold">
            <i class="fa-solid fa-clock mr-2"></i> Horários
          </button>

          <button id="logoutBtn" class="px-4 py-2 bg-red-600 text-white rounded-lg font-semibold">
            <i class="fa-solid fa-sign-out-alt mr-2"></i> Sair
          </button>
        </div>

      </div>
    </header>

    <!-- Visualizar Calendário -->
    <div id="calendarView" class="p-6 flex-grow">
      <div class="bg-white p-6 rounded-xl shadow-lg border-2 border-gray-200 h-full">
        <div id="calendar" class="h-full"></div>
      </div>
    </div>

    <!-- Disciplinas -->
    <div id="disciplinasView" class="hidden p-6 overflow-auto">
      <div class="max-w-4xl mx-auto">

        <h2 class="text-3xl font-bold text-[#001f4d] mb-6">Gerenciar Disciplinas</h2>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6 border-2 border-gray-200">
          <h3 class="text-xl font-bold text-[#001f4d] mb-4">Nova Disciplina</h3>

          <div class="space-y-4">
            <input type="text" id="className" placeholder="Nome da disciplina"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <select id="classProfessor"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">
              <option value="">Selecione o professor</option>
            </select>

            <div class="flex items-center gap-3">
              <label class="text-[#001f4d] font-semibold">Cor:</label>
              <input type="color" id="classColor" value="#003080"
                class="h-12 w-20 border-2 border-gray-300 rounded-lg cursor-pointer">
            </div>

            <button id="addClassBtn"
              class="w-full bg-[#001f4d] text-white py-3 rounded-lg font-semibold">
              <i class="fa-solid fa-plus mr-2"></i> Adicionar Disciplina
            </button>
          </div>
        </div>

        <div id="classesList" class="space-y-4"></div>
      </div>
    </div>

    <!-- Professores -->
    <div id="professoresView" class="hidden p-6 overflow-auto">
      <div class="max-w-4xl mx-auto">

        <h2 class="text-3xl font-bold text-[#001f4d] mb-6">Área dos Professores</h2>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6 border-2 border-gray-200">
          <h3 class="text-xl font-bold text-[#001f4d] mb-4">Novo Professor</h3>

          <div class="space-y-4">
            <input type="text" id="profNameAdd" placeholder="Nome do professor"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <input type="text" id="profSubject" placeholder="Matéria"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <input type="email" id="profEmailAdd" placeholder="E-mail"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <button id="addProfBtn"
              class="w-full bg-[#001f4d] text-white py-3 rounded-lg font-semibold">
              <i class="fa-solid fa-user-plus mr-2"></i> Adicionar Professor
            </button>
          </div>
        </div>

        <div id="professoresList" class="space-y-4"></div>
      </div>
    </div>

    <!-- Horários -->
    <div id="horariosView" class="hidden p-6 overflow-auto">
      <div class="max-w-4xl mx-auto">

        <h2 class="text-3xl font-bold text-[#001f4d] mb-6">Horários das Aulas</h2>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6 border-2 border-gray-200">
          <h3 class="text-xl font-bold text-[#001f4d] mb-4">Novo Horário</h3>

          <div class="space-y-4">
            <select id="scheduleClass"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">
              <option value="">Selecione a disciplina</option>
            </select>

            <input type="date" id="scheduleDate"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <div class="grid grid-cols-2 gap-4">
              <input type="time" id="scheduleStart"
                class="w-full p-3 border-2 border-gray-300 rounded-lg">

              <input type="time" id="scheduleEnd"
                class="w-full p-3 border-2 border-gray-300 rounded-lg">
            </div>

            <input type="text" id="scheduleRoom" placeholder="Sala (opcional)"
              class="w-full p-3 border-2 border-gray-300 rounded-lg">

            <button id="addScheduleBtn"
              class="w-full bg-[#001f4d] text-white py-3 rounded-lg font-semibold">
              <i class="fa-solid fa-clock mr-2"></i> Adicionar Horário
            </button>
          </div>
        </div>

        <div id="schedulesList" class="space-y-4"></div>
      </div>
    </div>

  </div>

  <!-- =========================================== -->
  <!--                  JAVASCRIPT                 -->
  <!-- =========================================== -->

  <script>
    // ---- Elementos ----
    const cadastroPage = document.getElementById("cadastroPage");
    const professorArea = document.getElementById("professorArea");
    const cadastroForm = document.getElementById("cadastroForm");
    const welcomeText = document.getElementById("welcomeText");

    const calendarView = document.getElementById("calendarView");
    const disciplinasView = document.getElementById("disciplinasView");
    const professoresView = document.getElementById("professoresView");
    const horariosView = document.getElementById("horariosView");

    const calendarBtn = document.getElementById("calendarBtn");
    const disciplinasBtn = document.getElementById("disciplinasBtn");
    const professoresBtn = document.getElementById("professoresBtn");
    const horariosBtn = document.getElementById("horariosBtn");
    const logoutBtn = document.getElementById("logoutBtn");

    const senhaInput = document.getElementById("profSenha");
    const toggleSenha = document.getElementById("toggleSenha");
    const eyeIcon = document.getElementById("eyeIcon");

    let professors = JSON.parse(localStorage.getItem("professors")) || [];
    let classes = JSON.parse(localStorage.getItem("classes")) || [];
    let schedules = JSON.parse(localStorage.getItem("schedules")) || [];
    let calendar;

    // ---- Alternar Senha ----
    toggleSenha.addEventListener("click", () => {
      const isPassword = senhaInput.type === "password";
      senhaInput.type = isPassword ? "text" : "password";
      eyeIcon.classList.toggle("fa-eye");
      eyeIcon.classList.toggle("fa-eye-slash");
    });

    // ---- Cadastro ----
    cadastroForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const nome = document.getElementById("profName").value;

      cadastroPage.classList.add("hidden");
      professorArea.classList.remove("hidden");

      welcomeText.textContent = `Bem-vindo(a), Professor(a) ${nome}!`;

      renderCalendar();
      updateAllLists();
    });

    // ---- Sair ----
    logoutBtn.addEventListener("click", () => {
      professorArea.classList.add("hidden");
      cadastroPage.classList.remove("hidden");
    });

    // ---- Navegação ----
    function showView(view) {
      [calendarView, disciplinasView, professoresView, horariosView]
        .forEach(v => v.classList.add("hidden"));

      view.classList.remove("hidden");
    }

    calendarBtn.addEventListener("click", () => {
      showView(calendarView);
      if (calendar) calendar.render();
    });

    disciplinasBtn.addEventListener("click", () => showView(disciplinasView));
    professoresBtn.addEventListener("click", () => showView(professoresView));
    horariosBtn.addEventListener("click", () => showView(horariosView));

    // ---- Professores ----
    document.getElementById("addProfBtn").addEventListener("click", () => {
      const name = document.getElementById("profNameAdd").value;
      const subject = document.getElementById("profSubject").value;
      const email = document.getElementById("profEmailAdd").value;

      if (name) {
        professors.push({
          id: Date.now(),
          name,
          subject,
          email
        });

        localStorage.setItem("professors", JSON.stringify(professors));

        updateAllLists();

        document.getElementById("profNameAdd").value = "";
        document.getElementById("profSubject").value = "";
        document.getElementById("profEmailAdd").value = "";
      }
    });

    // ---- Disciplinas ----
    document.getElementById("addClassBtn").addEventListener("click", () => {
      const name = document.getElementById("className").value;
      const professor = document.getElementById("classProfessor").value;
      const color = document.getElementById("classColor").value;

      if (name && professor) {
        classes.push({
          id: Date.now(),
          name,
          professor,
          color
        });

        localStorage.setItem("classes", JSON.stringify(classes));

        updateAllLists();

        document.getElementById("className").value = "";
        document.getElementById("classProfessor").value = "";
        document.getElementById("classColor").value = "#003080";
      }
    });

    // ---- Horários ----
    document.getElementById("addScheduleBtn").addEventListener("click", () => {
      const className = document.getElementById("scheduleClass").value;
      const date = document.getElementById("scheduleDate").value;
      const start = document.getElementById("scheduleStart").value;
      const end = document.getElementById("scheduleEnd").value;
      const room = document.getElementById("scheduleRoom").value;

      if (className && date && start && end) {

        const classInfo = classes.find(c => c.name === className);

        schedules.push({
          id: Date.now(),
          className,
          date,
          start,
          end,
          room,
          color: classInfo?.color || "#003080"
        });

        localStorage.setItem("schedules", JSON.stringify(schedules));

        updateAllLists();
        if (calendar) calendar.addEvent({
          title: `${className} (${start} - ${end})`,
          start: date,
          backgroundColor: classInfo?.color || "#003080"
        });

        document.getElementById("scheduleClass").value = "";
        document.getElementById("scheduleDate").value = "";
        document.getElementById("scheduleStart").value = "";
        document.getElementById("scheduleEnd").value = "";
        document.getElementById("scheduleRoom").value = "";
      }
    });

    // ---- Atualizar Listas ----
    function updateAllLists() {

      // Professores
      document.getElementById("professoresList").innerHTML =
        professors.map(p => `
          <div class="bg-white p-4 rounded-lg shadow border-2 border-gray-200 flex justify-between items-center">
            <div>
              <div class="font-bold text-[#001f4d] text-xl">${p.name}</div>
              <div class="text-gray-700 mt-1">Matéria: ${p.subject}</div>
              <div class="text-gray-600 mt-1">E-mail: ${p.email}</div>
            </div>
            <button onclick="deleteProf(${p.id})"
              class="bg-red-600 text-white px-4 py-2 rounded-lg">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        `).join("");

      // Seleção de professores
      document.getElementById("classProfessor").innerHTML =
        `<option value="">Selecione o professor</option>` +
        professors.map(p => `<option value="${p.name}">${p.name}</option>`).join("");

      // Disciplinas
      document.getElementById("classesList").innerHTML =
        classes.map(c => `
          <div class="bg-white p-4 rounded-lg shadow border-2 border-gray-200 flex justify-between items-center">
            <div class="flex items-center gap-4">
              <div class="w-6 h-6 rounded-full border-2 border-[#001f4d]"
                style="background-color:${c.color}"></div>
              <div>
                <div class="font-bold text-[#001f4d] text-lg">${c.name}</div>
                <div class="text-gray-700">Professor: ${c.professor}</div>
              </div>
            </div>

            <button onclick="deleteClass(${c.id})"
              class="bg-red-600 text-white px-4 py-2 rounded-lg">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        `).join("");

      // Seleção de disciplinas
      document.getElementById("scheduleClass").innerHTML =
        `<option value="">Selecione a disciplina</option>` +
        classes.map(c => `<option value="${c.name}">${c.name}</option>`).join("");

      // Horários
      document.getElementById("schedulesList").innerHTML =
        schedules.sort((a, b) => a.date.localeCompare(b.date))
          .map(s => `
          <div class="bg-white p-4 rounded-lg shadow border-2 border-gray-200 flex justify-between items-center">
            <div class="flex items-center gap-4">
              <div class="w-6 h-6 rounded-full border-2 border-[#001f4d]"
                style="background-color:${s.color}"></div>

              <div>
                <div class="font-bold text-[#001f4d] text-lg">${s.className}</div>
                <div class="text-gray-700">
                  ${new Date(s.date + "T00:00").toLocaleDateString("pt-BR")}
                  | ${s.start} - ${s.end}
                </div>
                ${s.room ? `<div class="text-gray-600">Sala: ${s.room}</div>` : ""}
              </div>
            </div>

            <button onclick="deleteSchedule(${s.id})"
              class="bg-red-600 text-white px-4 py-2 rounded-lg">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        `).join("");
    }

    // ---- Exclusões ----
    window.deleteProf = (id) => {
      professors = professors.filter(p => p.id !== id);
      localStorage.setItem("professors", JSON.stringify(professors));
      updateAllLists();
    };

    window.deleteClass = (id) => {
      classes = classes.filter(c => c.id !== id);
      localStorage.setItem("classes", JSON.stringify(classes));
      updateAllLists();
    };

    window.deleteSchedule = (id) => {
      schedules = schedules.filter(s => s.id !== id);
      localStorage.setItem("schedules", JSON.stringify(schedules));
      updateAllLists();
      if (calendar) renderCalendar();
    };

    // ---- Calendário ----
    function renderCalendar() {

      const events = schedules.map(s => ({
        title: `${s.className} (${s.start} - ${s.end})`,
        start: s.date,
        backgroundColor: s.color,
        borderColor: s.color
      }));

      const el = document.getElementById("calendar");

      calendar = new FullCalendar.Calendar(el, {
        initialView: "dayGridMonth",
        locale: "pt-br",
        height: "100%",
        expandRows: true,
        headerToolbar: {
          left: "prev,next today",
          center: "title",
          right: "dayGridMonth,dayGridWeek,dayGridDay"
        },
        events
      });

      calendar.render();
    }
  </script>

</body>
</html>
